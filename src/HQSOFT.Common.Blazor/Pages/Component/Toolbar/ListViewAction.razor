@using Microsoft.AspNetCore.Authorization 
@using Volo.Abp.Http.Client 
 
@inherits CommonComponentBase
@inject IRemoteServiceConfigurationProvider RemoteServiceConfigurationProvider 
@inject ShowActionListView ShowActionListView

<div class="nav-link">
    @if (ShowActionListView.UnreadCount == true)
    {
        <Dropdown>
            <DropdownToggle Color="Color.Primary">
                Action
            </DropdownToggle>
            <DropdownMenu Style="z-index: 1025;">
                <DropdownItem Clicked="DownloadAsExcelAsync">@L["ExportToExcel"]</DropdownItem>
                <DropdownDivider />
                @if (!CanDelete )
                {
                    <DropdownItem Clicked="Delete">@L["Delete"]</DropdownItem>
                } 
            </DropdownMenu>
        </Dropdown>
    }
    else
    {
        <i></i>
    }
</div>

@code {
    [Parameter]
    public EventCallback DownloadAsExcelAsync { get; set; }

    [Parameter]
    public EventCallback Delete { get; set; }

    [Parameter]
    public bool CanDelete { get; set; }

    protected override Task OnInitializedAsync()
    {
        ShowActionListView.UnreadCount = false;
        ShowActionListView.UnreadCountChanged += (s, e) => StateHasChanged();
        return base.OnInitializedAsync();
    }
} 